+++
title = "–ù–µ –¥–æ–≤—ñ—Ä—è–π—Ç–µ —Å–≤–æ—ó–º –æ—á–∞–º, –∫–æ–ª–∏ –¥–∏–≤–∏—Ç–µ—Å—å –Ω–∞ weak –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–∏"
date = '2024-09-14'
draft = false
+++

–£ –Ω–∞—Å —î –¥—É–∂–µ —Å—Ç–∞—Ä–∏–π —à–º–∞—Ç–æ–∫ –∫–æ–¥—É. –ü–æ —Å—É—Ç—ñ, —Ü–µ –ø—Ä–æ–∫—Å—ñ –Ω–∞ NSTimer. NSTimer retain-–∏—Ç—å –ø—Ä–æ–∫—Å—é –∑–∞–º—ñ—Å—Ç—å –Ω–∞—à–æ–≥–æ –¥–æ—Ä–æ–≥–æ—Ü—ñ–Ω–Ω–æ–≥–æ View Controller, —â–æ –ø–æ–∫–∞–∑—É—î PDF —Ñ–∞–π–ª. –ö–æ–¥ –±—É–≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–π –∑–∞ —á–∞—Å—ñ–≤ —Ä—É—á–Ω–æ–≥–æ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –ø–æ—Å–∏–ª–∞–Ω—å, –ø–æ—Ç—ñ–º –Ω–∞–ø—ñ–≤–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∏–π –Ω–∞ ARC —ñ –∑–∞–ª–∏—à–µ–Ω–∏–π —è–∫ —î. –í–∏—è–≤–∏–ª–æ—Å—è, —â–æ –≤—Å—ñ —Ü—ñ —Ä–æ–∫–∏, –∑ –º–æ–º–µ–Ω—Ç—É –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ ARC, –≤—ñ–Ω –º–∞–≤ –±–∞–≥, —è–∫–∏–π –ø—Ä–∏–∑–≤–æ–¥–∏–≤ –¥–æ –≤–∏—Ç–æ–∫—É –ø–∞–º'—è—Ç—ñ.

<!--more-->

–ö–æ–¥ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫:

```objectivec
@interface MYAutosaveTimer ()
@property (nonatomic, weak) MYViewController *owner;
@end

@implementation MYAutosaveTimer

- (void)setOwner:(MYViewController *)owner {
    if (_owner) {
        // —ñ–Ω–≤–∞–ª—ñ–¥—É–≤–∞—Ç–∏ —Ç–∞ –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Ç–∞–π–º–µ—Ä
    }

    _owner = owner;

    if (_owner) {
        // –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Ç–∞–π–º–µ—Ä
    }
}

@end
```

–ö–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∫–æ–¥ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫:

```objectivec
- (instancetype)init {
    ...

    _autosaveTimer = [MYAutosaveTimer new];
    [_autosaveTimer setOwner:self];

    ...
}

- (void)dealloc {
    ...
    [_autosaveTimer setOwner:nil];
}

```

–í–∏–≥–ª—è–¥–∞—î –∂–∞—Ö–ª–∏–≤–æ –≤ —Å—É—á–∞—Å–Ω—ñ –¥–Ω—ñ, –∞–ª–µ —è–∫ —è –π –∫–∞–∑–∞–≤ ‚Äì —Å—Ç–∞—Ä–∏–π –∫–æ–¥ ü§∑‚Äç‚ôÇÔ∏è. –Ø –π–æ–≥–æ –≤–∂–µ –ø–µ—Ä–µ–ø–∏—Å–∞–≤ —è–∫ —Å–ª—ñ–¥.

–†—ñ—á, —è–∫–∞ –ø—Ä–∏–≤–µ—Ä–Ω—É–ª–∞ –º–æ—é —É–≤–∞–≥—É, —ñ –ø—Ä–∏—á–∏–Ω–∞, —á–æ–º—É —è –≤–∏—Ä—ñ—à–∏–≤ –ø—Ä–æ —Ü–µ –Ω–∞–ø–∏—Å–∞—Ç–∏ ‚Äì —Ü–µ —Ç–µ, —è–∫ —Ü–µ –≤–∏–≥–ª—è–¥–∞—î –≤ LLDB. –í–∏ –∑–∞—Ö–æ–¥–∏—Ç–µ –≤ –º–µ—Ç–æ–¥ -setOwner:. –î–∏–≤–∏—Ç–µ—Å—å –Ω–∞ –∑–º—ñ–Ω–Ω—ñ, —ñ `_owner` –≤–∏–≥–ª—è–¥–∞—î –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å–≤—ñ–∂–∏–º —ñ –ø–æ–≤–Ω–∏–º —Å–∏–ª –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–æ–º –∑ —è–∫–æ—é—Å—å –∞–¥—Ä–µ—Å–æ—é. –ê –ø–æ—Ç—ñ–º... –≤–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ—Ç—Ä–∞–ø–ª—è—î—Ç–µ –≤ `if (_owner) { }`, –¥–µ —Ä–µ—Å—É—Ä—Å–∏ –º–∞–ª–∏ –± –±—É—Ç–∏ –∑–≤—ñ–ª—å–Ω–µ–Ω—ñ. –í–∫–∞–∑—ñ–≤–Ω–∏–∫ –®—Ä—å–æ–¥—ñ–Ω“ë–µ—Ä–∞ ‚Äì –≤—ñ–Ω –Ω–∞—á–µ –Ω–µ `nil`, –∞–ª–µ –≤—ñ–Ω `nil`.

–û—Ç–∂–µ, –º–æ—Ä–∞–ª—å —Ç–∞–∫–∞ ‚Äì –Ω–µ –¥–æ–≤—ñ—Ä—è–π—Ç–µ —Å–≤–æ—ó–º –æ—á–∞–º –∑ weak –≤–∫–∞–∑—ñ–≤–Ω–∏–∫–∞–º–∏ –Ω–∞ –æ–±'—î–∫—Ç, —è–∫–∏–π –¥–µ–∞–ª–æ–∫—É—î—Ç—å—Å—è. –í–∫–∞–∑—ñ–≤–Ω–∏–∫–∏ —Ü–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ä—ñ –¥–æ–±—Ä—ñ –∞–¥—Ä–µ—Å–∏ –≤ –Ω–∞—à—ñ –¥–Ω—ñ.
