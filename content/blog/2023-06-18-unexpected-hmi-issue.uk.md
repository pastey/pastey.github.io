+++
title = 'Неочікувана особливість людино-машинної взаємодії в iOS додатку'
date = '2023-06-18'
draft = false
+++

У нас був баг. Інструмент Ручка не працював на M2 iPad з увімкненим налаштуванням Захисту від зап'ястка.

Наш Захист від зап'ястка був доданий давно, коли ми робили Remarks – додаток для нотаток на базі нашої PDF бібліотеки. Ручка була основним інструментом у тому додатку. У нашому тестуванні ми виявили, що досить часто долоня, покладена на екран iPad, створювала деякі дотики. Наш код не знав, чи палець або зап'ясток створив `UITouch`, тому ці випадкові дотики робили мітки ручкою внизу сторінки. Захист від зап'ястка фільтрує дотики з `majorRadius` більшим за поріг, який ми евристично визначили.

Отже, повертаючись до сучасного бага. Будь ласка, подивіться на [відео, що демонструє це](https://drive.google.com/file/d/1XOQHgbfw8xmffSimVNnyXKT-glBNv4SD/view?usp=sharing).

<!--more-->

Я намагався відтворити баг без успіху. Я покликав Настю, яка повідомила про баг. Вона відтворила його на своєму пристрої з легкістю. Ми дебажили це на її машині. Досить скоро ми знайшли рядок, де наш захист від зап'ястка відкидав дотики. Виявилося, що `majorRadius` на її пристрої був більшим за наш поріг.

Але Настя не клала долоню на екран. І я не міг відтворити це на своєму пристрої.

І тоді я зрозумів! Подивіться на відео ще раз! Подивіться як Настя кладе пальці на екран! У неї довгі нігті, вона має класти палець пласко. У мене немає таких елегантних нігтів – я використовую кінчик пальця. І саме звідси йде той великий `majorRadius` "на її пристрої".

Отже, якщо ви використовуєте `majorRadius`, будьте уважні :-)
